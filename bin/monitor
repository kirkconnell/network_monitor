#!/usr/bin/env ruby
lib_dir = File.expand_path(File.join("../lib"))

$:.unshift(lib_dir)
$:.uniq!
require 'network_monitor'

            
sock = UDPSocket.open
sock.connect(ARGV[0], 161)            
sock.send(SMNP::Request.new.to_s, 0)

data = sock.recvfrom(47)[0]

resp = SMNP::Response.new(data)
print "Received IP Datagrams: #{resp.datagram_counter}\n"